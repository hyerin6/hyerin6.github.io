I",
<p>우리집에서 가까이 있는 반려동물을 탐색하는 기능을 구현하기 위해 <br />
kakao map api를 사용하여 주소를 저장해보기로 했다.</p>

<h3 id="kakao-map-api">Kakao Map Api</h3>

<ul>
  <li><a href="https://developers.kakao.com/">developers.kakao</a></li>
  <li><a href="https://developers.kakao.com/tool/rest-api/open/get/v2-local-geo-coord2address.%7Bformat%7D">좌표로 주소 변환하기</a></li>
</ul>

<p>내 애플리케이션 생성 후 승인키를 발급 받아 좌표로 주소를 변환하는 api에 헤더로 넘겨주면 된다. <br />
내 애플리케이션에서 승인키 발급 뿐만 아니라 도메인과 IP 설정을 해줘야 api 사용이 가능하다.</p>

<p><br /></p>

<h3 id="좌표와-주소를-어떻게-저장할까">좌표와 주소를 어떻게 저장할까</h3>

<p>클라이언트에서 x, y 좌표를 받아 주소를 변환하는 것까지 테스트를 마치고 <br />
DB에 좌표를 저장하고 가까이 있는 반려동물을 조회해야 하는데 <br />
MySQL에 <code class="language-plaintext highlighter-rouge">Point</code> 타입으로 저장하고 조회할 수 있다는 사실을 알게 되었다.</p>

<p>다음과 같이 설정하여 공간 데이터 타입을 사용할 수 있으며   <br />
공간 데이터 타입을 활용하여 위치 데이터를 인덱싱할 수 있다.</p>

<ul>
  <li>pom.xml</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.vividsolutions&lt;/groupId&gt;
    &lt;artifactId&gt;jts&lt;/artifactId&gt;
    &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
    &lt;artifactId&gt;hibernate-spatial&lt;/artifactId&gt;
    &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div></div>

<p><br /></p>

<ul>
  <li>application.yml</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring:  
    jpa:  
        database-platform: org.hibernate.spatial.dialect.mysql.MySQL56InnoDBSpatialDialect  
</code></pre></div></div>

<p><br /></p>

<ul>
  <li>INDEX</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Point</code> 타입은 다음과 같이 인덱스 생성이 가능하다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE SPATIAL INDEX [index_name] ON [table_name] ([index_column]);  
</code></pre></div></div>

<p><br /></p>
:ET