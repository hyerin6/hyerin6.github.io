I"<h4 id="jpa가-제공하는-데이터베이스-기본-키-생성-전략">JPA가 제공하는 데이터베이스 기본 키 생성 전략</h4>

<ul>
  <li>
    <p>직접 할당 : 기본 키를 어플리케이션에서 직접 할당한다.
<code class="language-plaintext highlighter-rouge">@Id</code> 만 사용한다.</p>
  </li>
  <li>
    <p>자동 생성 : 대리 키 사용 방식
<code class="language-plaintext highlighter-rouge">@Id</code>와 <code class="language-plaintext highlighter-rouge">@GeneratedValue</code>를 함께 사용한다.</p>
    <ul>
      <li>IDENTITY : 기본 키 생성을 데이터베이스에 위임한다.</li>
      <li>SEQUENCE : 데이터베이스 시퀀스를 사용해서 기본 키를 할당한다.</li>
      <li>TABLE : 키 생성 테이블을 사용한다.</li>
      <li>AUTO : 데이터베이스에 관계없이 식별자를 자동 생성하라는 의미, DB가 변경되더라도 수정할 필요 없다.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h4 id="1-generationtypeauto">1. GenerationType.AUTO</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Id 
@GeneratedValue // @GeneratedValue(strategy=GenerationType.AUTO) 와 동일 
protected Long id;
</code></pre></div></div>

<p><strong>JPA 공급자에 따라 기본 설정이 다르다.</strong></p>
<ul>
  <li>Oracle을 사용할 경우 SEQUENCE가 기본</li>
  <li>MS SQL Server의 경우 IDENTITY가 기본</li>
  <li>(Hibernate 5.0부터) MySQL의 AUTO는 IDENTITY가 아닌 TABLE을 기본 시퀀스 전략으로 선택된다.</li>
</ul>

<p><br /></p>

<p>Spring Boot는 Hibernate의 id 생성 전략을 그대로 따라갈지 말지를 결정하는
useNewIdGeneratorMappings 설정이 있다.</p>

<p>1.5에선 기본값이 false, 2.0부터는 true
Hibernate 5.0부터 MySQL의 AUTO는 IDENTITY가 아닌 TABLE을 기본 시퀀스 전략으로 선택된다.</p>

<p>즉, 1.5에선 Hibernate 5를 쓰더라도 AUTO를 따라가지 않기 때문에 IDENTITY가 선택되고
2.0에선 true이므로 Hibernate 5를 그대로 따라가기 때문에 TABLE이 선택되었다.
(Hibernate 6.0에서 다시 IDENTITY로 돌아간다고 한다.)</p>

:ET