---
layout: post
title: "2020-04-14 litebook"
description: "JPA update"
date: 2020-04-14
tags: [litebook]
comments: true
share: true
--- 

### JPA userType 변경하려면?          
```java
userRepository.deleteByEmail(user.getEmail());
userRepository.save(user);
```
위 코드로 구현했을 때, deleteByEmail() 메소드의 결과가 DB에 바로 적용되지 않아     
save() 메소드에서 unique로 설정한 email 때문에 오류가 발생한다.     

그래서 DB에 바로 적용될 수 있게 아래와 같이 구현했다.     
```java
userRepository.deleteByEmail(user.getEmail());
userRepository.flush();
userRepository.save(user);
```   


