<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Spring boot Thymeleaf</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" type="text/css">

  <!-- Font -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Hyerin Blog" href="/feed.xml" />
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Spring boot Thymeleaf | Hyerin Blog</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Spring boot Thymeleaf" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Spring Web MVC" />
<meta property="og:description" content="Spring Web MVC" />
<link rel="canonical" href="http://localhost:4000/2021-11-02/Thymeleaf/" />
<meta property="og:url" content="http://localhost:4000/2021-11-02/Thymeleaf/" />
<meta property="og:site_name" content="Hyerin Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-02T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Spring boot Thymeleaf" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2021-11-02/Thymeleaf/","headline":"Spring boot Thymeleaf","dateModified":"2021-11-02T00:00:00+09:00","datePublished":"2021-11-02T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021-11-02/Thymeleaf/"},"@type":"BlogPosting","description":"Spring Web MVC","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8RJ9ZZ1LSQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8RJ9ZZ1LSQ', { 'anonymize_ip': false});
</script>


</head>

<body>
  <div class="content-container">
    <header>
  <div class="header-small">
    <a href="http://localhost:4000">Hyerin Blog</a>
  </div>
</header>
<div class="post">
  <div class="post-title">Spring boot Thymeleaf</div>
  <br />
  <span class="post-date">
    <time>02 Nov 2021</time>
  </span>

  <div class="post-tag">
    <ul>
      
      <li>
        <a href="http://localhost:4000/tags#Spring">
          <span>Spring</span>
        </a>
      </li>
      
      
      <li>
        <a href="http://localhost:4000/tags#Thymeleaf">
          <span>Thymeleaf</span>
        </a>
      </li>
      
      
    </ul>
  </div>

  <p><br /></p>

<p>테스트를 하기 전 편리함을 위해 배포, 테스트 자동화를 구축했다.</p>

<p><a href="https://hyerin6.github.io/2021-10-20/jenkins/">https://hyerin6.github.io/2021-10-20/jenkins/</a></p>

<p><br /></p>

<p>이번 프로젝트는 백엔드에 집중하기 위해 프론트를 따로 개발하지 않았지만</p>

<p>테스트를 위해 사용자 회원가입, token, 유저 정보를 확인해야 했기 때문에</p>

<p>간단하게 <code class="language-plaintext highlighter-rouge">index.html</code>, <code class="language-plaintext highlighter-rouge">login.html</code>, <code class="language-plaintext highlighter-rouge">user.html</code> 파일을 생성했다.</p>

<p><br /></p>

<p>스프링 부트가 자동 설정을 지원하는 템플릿 엔진 Thymeleaf로 구현했다.</p>

<p>예전에 자세히 알아보지 않고 JSP를 많이 사용했었는데</p>

<p>스프링 부트가 JSP를 권장하지 않는 이유와 Thymeleaf에 대해 알아보자.</p>

<p><br />
<br /></p>

<h1 id="템플릿-엔진이란">템플릿 엔진이란?</h1>
<p>템플릿 엔진은 동적 컨텐츠를 생성하는 방법이다.</p>

<p>템플릿 양식과 특정 데이터 모델에 따른 입력 자료를 결합하여 결과 문서를 출력하는 소프트웨어를 말하며,</p>

<p>view(html)와 data logic(DB connection)을 분리해주는 기능을 한다.</p>

<p><br /></p>

<ul>
  <li>서버 사이드 템플릿 엔진 : 서버에서 가져온 데이터를 미리 정의된 템플릿에 넣어 html을 그린 뒤 클라이언트에게 전달해준다.  <br />
HTML 코드에서 고정적으로 사용되는 부분은 템플릿으로 만들어두고, 동적으로 생성되는 부분만 템플릿에 소스코드를 끼워넣는 방식으로 동작한다.<br />
<br /></li>
  <li>클라이언트 사이드 템플릿 엔진 : HTML 형태로 코드를 작성하며, 동적으로 DOM을 그리게 해주는 역할을 한다.
데이터를 받아서 DOM 객체에 동적으로 그려주는 프로세스를 담당한다.</li>
</ul>

<p><br /></p>

<h4 id="스프링-부트가-자동-설정을-지원하는-템플릿-엔진">스프링 부트가 자동 설정을 지원하는 템플릿 엔진</h4>
<ul>
  <li>FreeMarker</li>
  <li>Groovy</li>
  <li>Thymeleaf</li>
  <li>Mustache</li>
</ul>

<p><br />
<br /></p>

<h1 id="jsp-자동-설정을-지원하지-않는-이유">JSP 자동 설정을 지원하지 않는 이유</h1>
<p>Spring boot는 JSP를 권장하지 않는다.</p>

<p>JSP를 사용하면 WAR 패키징을 해야한다.</p>

<p>WAR 패키징으로도 임베디드 톰캣으로 실행할 수 있고 배포할 수 있으나</p>

<p>Undertow라는 최근에 만들어진 서블릿 엔진이 JSP를 지원하지 않는 등 제약사항이 있다.</p>

<p>또한 JSP에 대한 의존성을 넣으면 의존성 문제가 생기는 경우도 있다.</p>

<p><br />
<br /></p>

<h1 id="jar-vs-war">jar vs war</h1>
<p>jar, war 모두 java의 jar 툴을 이용해 생성된 파일이며 애플리케이션을 쉽게 배포하고 동작시킬 수 있도록 관련 파일을 패키징해준다.</p>

<p><br /></p>

<h3 id="jar-java-archive">JAR (Java Archive)</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">.jar</code> 자바 프로젝트를 압축한 파일</li>
  <li>자바 리소스, 속성파일, 라이브러리 등이 포함되어 있다.</li>
  <li>원하는 구조로 구성이 가능하고 JDK에 포함된 JRE만 가지고도 실행 가능하다.</li>
</ul>

<p><br /></p>

<h3 id="warweb-application-archive">WAR(Web Application Archive)</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">.war</code> servlet/jsp 컨테이너에 배치할 수 있는 웹 애플리케이션 압축 파일</li>
  <li>웹 관련 자원만 포함한다. (JSP, Servlet, JAR, Class, HTML 등)</li>
  <li>JAR과 달리 WEB-INF 및 META-INF 디렉토리로 사전 정의된 구조를 사용하며 실행하기 위해서 Tomcat과 같은 웹 서버 또는 웹 컨테이너(was)가 필요하다.</li>
  <li>WAR도 java의 jar 옵션 (<code class="language-plaintext highlighter-rouge">java -jar</code>)을 이용해 생성하는 JAR 파일의 일종이다.</li>
</ul>

<p><br />
<br /></p>

<h1 id="thymeleaf">Thymeleaf</h1>
<p>Thymeleaf는 비교적 최근에 만들어진 템플릿 엔진이며 서버사이드 자바 템플릿 엔진의 한 종류이다.</p>

<p>JSP와 Thymeleaf의 가장 큰 차이점은 JSP와 달리 Servlet Code로 변환되지 않다는 점이다.</p>

<p>따라서 비즈니스 로직과 분리되어 오로지 View에 집중할 수 있다.</p>

<p><br /></p>

<h3 id="의존성-추가">의존성 추가</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
</code></pre></div></div>

<p><br /></p>

<h3 id="html-파일-생성-위치">html 파일 생성 위치</h3>

<p><code class="language-plaintext highlighter-rouge">src</code> &gt; <code class="language-plaintext highlighter-rouge">main</code> &gt; <code class="language-plaintext highlighter-rouge">resource</code> &gt; <code class="language-plaintext highlighter-rouge">templates</code> 에 생성하면 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">html</span> <span class="n">lang</span><span class="o">=</span><span class="s">"en"</span> <span class="nl">xmlns:</span><span class="n">th</span><span class="o">=</span><span class="s">"http://www.thymeleaf.org"</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>위 코드처럼 th 네임스페이스를 추가하면 된다.</p>

<p><br /></p>

<h3 id="테스트">테스트</h3>
<p><code class="language-plaintext highlighter-rouge">.andDo(print())</code> 를 통해 렌더링 된 결과까지 확인할 수 있다.</p>

<p>이것은 Thymeleaf를 사용했기 때문이다.</p>

<p>JSP를 사용하면 본문을 확인(렌더링된 결과)하는 것이 매우 힘들다.</p>

<p>서블릿 엔진 자체가 JSP 템플릿을 완성시키기 때문에 응답으로 내보낼 최종적인 View를 확인하기 위해서는 서블릿 엔진 개입이 필수적이다.</p>

<p>반면 Thymeleaf는 서블릿 컨테이너의 개입 없이 독자적으로 최종적인 View를 완성한다.</p>

<p>테스트에서 사용한 mockMVC는 가짜 서블릿 컨테이너이며 실제 서블릿 컨테이너가 할 수 있는 일을 다 할 수 없다.</p>

<p><br />
<br /></p>

<h1 id="jar-배포">JAR 배포</h1>

<p><img src="https://user-images.githubusercontent.com/33855307/139864504-6e2ca6ee-7e03-4128-a41a-98e6a0edd0c5.png" alt="KakaoTalk_Photo_2021-11-02-23-15-17" /></p>

<p>위 사진을 보면 운영 서버에 배포된 후 Thymeleaf로 구현한 view가 잘 뜨는 것을 확인할 수 있다.</p>

<p>png 파일인 <code class="language-plaintext highlighter-rouge">카카오 로그인</code> 버튼도 잘 출력된다.</p>

<p><br /></p>


  <br />

  <hr />

  <br />
  <script src="https://utteranc.es/client.js"
        repo="hyerin6/hyerin6.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
  </script>

</div>


    <!-- Documents about icons are here: http://fontawesome.io/icons/ -->
<div class="footer">
  <hr />

  <div class="footer-link">
    
    <a href="https://github.com/hyerin6"><i class="fa fa-github" aria-hidden="true"></i></a>
    
	
    
    <a href="mailto:hyerinn6@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    
  </div>
  © 2022 Hyerin. All rights reserved.
</div>

<br />
<div class="footer">
    <a style="text-align: center;" href="https://hits.seeyoufarm.com">
      <img style="text-align: center;" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fhyerin6.github.io&count_bg=%23010101&title_bg=%23070707&icon=&icon_color=%23E7E7E7&title=visitors&edge_flat=false"/>
    </a>
</div>
  </div>
</body>
</html>
