<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WebClient, Nested Class</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" type="text/css">

  <!-- Font -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Hyerin Blog" href="/feed.xml" />
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>WebClient, Nested Class | Hyerin Blog</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="WebClient, Nested Class" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="depromeet final 5 : kakao 로그인 기능 코드리뷰" />
<meta property="og:description" content="depromeet final 5 : kakao 로그인 기능 코드리뷰" />
<link rel="canonical" href="http://localhost:4000/2020-10-17/review2/" />
<meta property="og:url" content="http://localhost:4000/2020-10-17/review2/" />
<meta property="og:site_name" content="Hyerin Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-17T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="WebClient, Nested Class" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2020-10-17/review2/","headline":"WebClient, Nested Class","dateModified":"2020-10-17T00:00:00+09:00","datePublished":"2020-10-17T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2020-10-17/review2/"},"@type":"BlogPosting","description":"depromeet final 5 : kakao 로그인 기능 코드리뷰","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8RJ9ZZ1LSQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8RJ9ZZ1LSQ', { 'anonymize_ip': false});
</script>


</head>

<body>
  <div class="content-container">
    <header>
  <div class="header-small">
    <a href="http://localhost:4000">Hyerin Blog</a>
  </div>
</header>
<div class="post">
  <div class="post-title">WebClient, Nested Class</div>
  <br />
  <span class="post-date">
    <time>17 Oct 2020</time>
  </span>

  <div class="post-tag">
    <ul>
      
      <li>
        <a href="http://localhost:4000/tags#depromeet">
          <span>depromeet</span>
        </a>
      </li>
      
      
    </ul>
  </div>

  <p>카카오 로그인 기능을 담당하게 되어 약 일주일 동안 기능 구현과 함께 코드리뷰를 받았다.</p>

<h3 id="webclient에서-요청을-날릴-때-exchange-vs-retrieve">WebClient에서 요청을 날릴 때 <code class="language-plaintext highlighter-rouge">exchange</code> VS <code class="language-plaintext highlighter-rouge">retrieve</code></h3>

<p><code class="language-plaintext highlighter-rouge">retrieve</code>는 바로 response body를 처리 할 수 있고 <br />
<code class="language-plaintext highlighter-rouge">exchange</code>는 상태값, 헤더 등 client response 자체를 전달해줘서 세밀하게 제어할 수 있는 차이가 있다.</p>

<p>그런데 <code class="language-plaintext highlighter-rouge">exchange</code>는 성공, exception, 예상치 못한 응담이라도 response를 처리하지 않으면 메모리 누수가 발생한다.   <br />
<code class="language-plaintext highlighter-rouge">retrieve</code>와 달리 4XX, 5XX와 같은 응답에 대한 자동 처리가 없어 상태 코드를 확인해야 하는데 그 과정에서 개발자가 실수하게 되면 메모리릭이 발생하기 때문에 <code class="language-plaintext highlighter-rouge">retrieve</code> 사용을 권장한다고 한다.</p>

<p>이번 프로젝트에서 kakao의 일부 api만 사용할 것이고 거의 대부분 문제가 되는 응답은 상태가 4XX이라 <code class="language-plaintext highlighter-rouge">onStatus()</code> 에서 에러를 처리가 가능해 <code class="language-plaintext highlighter-rouge">retrieve</code>를 사용했다.</p>

<p><br />       <br />
<br /></p>

<h3 id="nested-class">Nested Class</h3>

<p>이펙티브 자바, 토비의 스프링 등을 읽으면서 inner class는 static으로 구현하라는 것을 많이 봤다.</p>

<p>inner class로 인해 메모리릭이 발생하는 경우는 (비동기) outer class와 inner class의 스레드가 돌아가는중에  <br />
outer class의 작업이 끝나면 inner class의 outer class 객체 참조로 인해 메모리가 해제되지 않아 생긴다~</p>

<p>static class는 외부 클래스의 객체 생성 없이 내부 클래스의 객체를 생성할 수 있고<br />
암시적인 outer class 객체 참조를 하지 않는다~</p>

<p>위와 같은 이유로 static으로 구현하라는 것이었는데       <br />
단지 response로만 사용하는 경우에는 고려하지 않아도 될 문제였다.     <br />
그래도 inner class에 대해 다시 한 번 공부할 수 있는 계기가 되었다.</p>

<p>이참에 다시 정리해보자.  <br />
<br /></p>

<ol>
  <li>Nested Class      <br />
클래스 안에 클래스라는 의미로 이를 사용하는 이유는 <br />
외부 클래스의 멤버들을 쉽게 접근할 수 있고 외부에는 불필요한 클래스 파일을 감춰서(캡슐화) 코드의 복잡성을 줄일 수 있다는 점이다.</li>
</ol>

<p><br /></p>

<ol>
  <li>종류</li>
</ol>

<ul>
  <li>
    <p>인스턴스 클래스(instance class)    <br />
외부 클래스의 멤버변수 선언 위치에 선언   <br />
<br /></p>
  </li>
  <li>
    <p>스태틱 클래스(static class)  <br />
외부 클래스의 멤버변수 선언 위치에 선언 <br />            <br />
<code class="language-plaintext highlighter-rouge">외부클래스명.내부클래스명 객체명 = new 외부클래스명.내부클래스명();</code>  <br />
위와 같이 외부 클래스 객체 없이 내부 클래스 객체 생성이 가능하다.          <br />
<br /></p>
  </li>
  <li>
    <p>지역 클래스(local class)   <br />
외부 클래스의 메서드나 초기화 블럭에서 선언     <br />
<br /></p>
  </li>
  <li>
    <p>익명 클래스(anonymous inner class)      <br />
클래스의 선언과 객체 생성을 동시에 하는 이름이 없는 클래스</p>
  </li>
</ul>

<p><br /></p>



  <br />
  <script src="https://utteranc.es/client.js"
        repo="hyerin6/hyerin6.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
  </script>

</div>


    <!-- Documents about icons are here: http://fontawesome.io/icons/ -->
<div class="footer">
  <hr />
  <div class="footer-link">
	
    
    <a href="https://github.com/hyerin6"><i class="fa fa-github" aria-hidden="true"></i></a>
    
	
    
    <a href="mailto:hyerinn6@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    

  </div>
  © 2022 Hyerin. All rights reserved.
</div>

  </div>
</body>
</html>
